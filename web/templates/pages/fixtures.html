{{define "title"}}Fixtures{{end}}

{{define "content"}}
{{with .FixturesTemplateData}}
<main class="my-4 container p-sm-0">
    <div class="row justify-content-evenly justify-content-sm-between mb-4">
        <div class="col-1 d-none d-sm-flex"></div>
        {{range $index, $date := .DateRanges}}
        <div class="col-1 text-center {{if eq $index -3 3}} d-none d-sm-flex {{end}}">
            <a href="/fixtures/date/{{$date.HREF}}"
                class="text-decoration-none link-body-emphasis d-flex flex-column {{if ne $index 0}} text-secondary {{else}} text-body {{end}}">
                <span class="fw-bold">{{$date.Weekday}}</span>
                <small>{{$date.Date}}</small>
            </a>
        </div>
        {{end}}
        <div class="col-1">
            {{/* create datepicker component */}}
            <div class="custom-datepicker">
            </div>
        </div>
    </div>
    <div class="d-flex flex-row justify-content-between align-items-center flex-wrap">
        <h3>Fixtures</h3>
    </div>
    <div id="leaguesContainer">
        {{range $league, $matches := .LeagueMatches}}
        <div class="my-3">
            <h5>{{$league}}</h5>
            <div class="row g-2 mx-2">
                {{range $matches}}
                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                    <div class="card p-0">
                        <a href="#" class="text-body text-decoration-none">
                            <div class="card-body d-flex flex-column gap-2">
                                <div class="text-secondary">
                                    {{if eq .Fixture.Status.Short "TBD" "HT" "FT" "BT" "LIVE"}}
                                    <div>{{.Fixture.Status.Short}}</div>
                                    {{else if eq .Fixture.Status.Short "NS"}}
                                    <div>{{formatMatchTime .Fixture.Date}}</div>
                                    {{else if eq .Fixture.Status.Short "1H" "2H" "ET"}}
                                    <div>{{.Fixture.Status.Elapsed}}'</div>
                                    {{else if eq .Fixture.Status.Short "AET"}}
                                    <div>FT <span class="text-secondary">(ET)</span></div>
                                    {{else if eq .Fixture.Status.Short "PEN"}}
                                    <div>FT <span class="text-secondary">(P)</span></div>
                                    {{else}}
                                    <div>{{.Fixture.Status.Long}}</div>
                                    {{end}}
                                </div>
                                <div class="d-flex flex-row align-items-center justify-content-between">
                                    <div class="d-flex flex-row align-items-center gap-2">
                                        <img src="{{.Teams.Home.Logo}}" width="30px" height="30px"
                                            alt="{{.Teams.Home.Name}} Logo" loading="lazy" />
                                        <p
                                            class="d-block m-0 text-truncate{{if .Teams.Away.Winner}} text-secondary {{end}}">
                                            {{.Teams.Home.Name}}</p>
                                    </div>
                                    {{if eq .Fixture.Status.Short "TBD" "NS"}}
                                    {{else}}
                                    <p class="fs-5 m-0{{if .Teams.Away.Winner}} text-secondary {{end}}">
                                        {{.Goals.Home}}
                                        {{if eq .Fixture.Status.Short "PEN"}}
                                        <span>({{.Score.Penalty.Home}})</span>
                                        {{end}}
                                    </p>
                                    {{end}}
                                </div>
                                <div class="d-flex flex-row align-items-center justify-content-between">
                                    <div class="d-flex flex-row align-items-center gap-2">
                                        <img src="{{.Teams.Away.Logo}}" width="30px" height="30px"
                                            alt="{{.Teams.Away.Name}} Logo" loading="lazy" />
                                        <p
                                            class="d-block m-0 text-truncate{{if .Teams.Home.Winner}} text-secondary {{end}}">
                                            {{.Teams.Away.Name}}</p>
                                    </div>
                                    {{if eq .Fixture.Status.Short "TBD" "NS"}}
                                    {{else}}
                                    <p class="fs-5 m-0{{if .Teams.Home.Winner}} text-secondary {{end}}">
                                        {{.Goals.Away}}
                                        {{if eq .Fixture.Status.Short "PEN"}}
                                        <span>({{.Score.Penalty.Away}})</span>
                                        {{end}}
                                    </p>
                                    {{end}}
                                </div>
                            </div>
                        </a>
                    </div>
                </div>
                {{end}}
            </div>
        </div>
        {{else}}
        <div>
            <p>No games on this date</p>
        </div>
        {{end}}
    </div>
</main>
{{end}}
{{end}}
